(this.webpackJsonptestforozitag=this.webpackJsonptestforozitag||[]).push([[0],{13:function(e,t,r){e.exports={container:"Login_container__35EMk",main:"Login_main__1O6TK",formWrap:"Login_formWrap__mVFfX",error:"Login_error__tge3D",btnWrap:"Login_btnWrap__2_QPD"}},29:function(e,t,r){e.exports={preloader:"Preloader_preloader__2Kc8i",spinner:"Preloader_spinner__20dkH",spin:"Preloader_spin__3PNso"}},40:function(e,t,r){},41:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(22),i=r.n(c),s=(r(40),r(41),r(12)),o=r(35),u=r(6),d=r(14),j=r.n(d),l=r(19),p=r(20),b=function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tager.dev.ozitag.com/api/auth/user",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tager.dev.ozitag.com/api/tager/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t),Accept:"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(p.b)("auth/loginThunk",function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.rejectWithValue,e.prev=1,n(L({isLoader:!0})),e.next=5,b(t);case 5:return c=e.sent,e.abrupt("return",{tokenType:c.data.tokenType,accessToken:c.data.accessToken,isLoggedIn:!0});case 9:return e.prev=9,e.t0=e.catch(1),n(v({error:"Something wrong"})),setTimeout((function(){n(v({error:""}))}),3e3),e.abrupt("return",a(e.t0.toString()));case 14:return e.prev=14,n(L({isLoader:!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])})));return function(t,r){return e.apply(this,arguments)}}()),f=Object(p.b)("auth/authMeThunk",function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.rejectWithValue,e.prev=1,n(L({isLoader:!0})),e.next=5,h(t);case 5:return c=e.sent,e.abrupt("return",{name:c.data.name,email:c.data.email,isLoggedIn:!0});case 9:return e.prev=9,e.t0=e.catch(1),n(v({error:"Something wrong"})),setTimeout((function(){n(v({error:""}))}),3e3),e.abrupt("return",a(e.t0.toString()));case 14:return e.prev=14,n(L({isLoader:!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])})));return function(t,r){return e.apply(this,arguments)}}()),m=Object(p.c)({name:"auth",initialState:{isLoggedIn:!1,isLoader:!1,tokenType:"",accessToken:"",name:"",email:"",error:""},reducers:{setError:function(e,t){e.error=t.payload.error},changeIsLoader:function(e,t){e.isLoader=t.payload.isLoader},logOutClearState:function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)}},extraReducers:function(e){e.addCase(O.fulfilled,(function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)})),e.addCase(f.fulfilled,(function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)}))}}),x=m.reducer,g=m.actions,v=g.setError,L=g.changeIsLoader,_=g.logOutClearState,T=r(3),y=r(13),k=r.n(y),w=r(29),N=r.n(w),I=r(1),S=function(){return Object(I.jsx)("div",{className:N.a.preloader,children:Object(I.jsx)("div",{className:N.a.spinner})})},P=function(){var e=Object(u.c)((function(e){return e.auth.isLoggedIn})),t=Object(u.c)((function(e){return e.auth.error})),r=Object(u.c)((function(e){return e.auth.isLoader})),n=Object(u.b)(),a=Object(o.a)({initialValues:{clientId:1,email:"",password:""},validate:function(e){var t={};return e.email&&e.password?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e){n(O(e)),a.resetForm()}});if(e)return Object(I.jsx)(T.a,{to:"/Profile"});var c=function(e){return Object(I.jsx)("span",{className:k.a.error,children:e})};return Object(I.jsx)("div",{className:k.a.container,children:Object(I.jsxs)("div",{className:k.a.main,children:[Object(I.jsx)("h3",{children:"OZITAG Company"}),Object(I.jsx)("form",{onSubmit:a.handleSubmit,children:Object(I.jsxs)("div",{className:k.a.formWrap,children:[Object(I.jsxs)("div",{children:[a.errors.email&&a.touched.email?c(a.errors.email):t&&c(t),Object(I.jsx)("input",Object(s.a)(Object(s.a)({},a.getFieldProps("email")),{},{placeholder:"email"}))]}),Object(I.jsxs)("div",{children:[a.errors.password?c(a.errors.password):t&&c(t),Object(I.jsx)("input",Object(s.a)(Object(s.a)({},a.getFieldProps("password")),{},{placeholder:"password",type:"password"}))]}),Object(I.jsx)("div",{className:k.a.btnWrap,children:r?Object(I.jsx)("div",{children:Object(I.jsx)(S,{})}):Object(I.jsx)("button",{type:"submit",children:Object(I.jsx)("span",{children:"LOG IN"})})})]})})]})})},C=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.auth.isLoggedIn})),r=Object(u.c)((function(e){return e.auth.accessToken})),a=Object(u.c)((function(e){return e.auth.name})),c=Object(u.c)((function(e){return e.auth.email})),i=Object(u.c)((function(e){return e.auth.isLoader}));return Object(n.useEffect)((function(){r&&e(f(r))}),[e,r]),t?Object(I.jsx)("div",{className:k.a.container,children:Object(I.jsxs)("div",{className:k.a.main,children:[Object(I.jsx)("h3",{children:"OZITAG Company"}),i?Object(I.jsx)(S,{}):Object(I.jsx)("div",{children:Object(I.jsxs)("div",{className:k.a.formWrap,children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h4",{children:"Name:"}),Object(I.jsx)("span",{children:a})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h4",{children:"Email"}),Object(I.jsxs)("span",{children:["email: ",c]})]}),Object(I.jsx)("div",{className:k.a.btnWrap,children:Object(I.jsx)("button",{onClick:function(){e(_({accessToken:"",email:"",isLoggedIn:!1,name:"",tokenType:""}))},type:"button",children:Object(I.jsx)("span",{children:"LOG OUT"})})})]})})]})}):Object(I.jsx)(T.a,{to:"/login"})},A=r(24);var W=function(){return Object(I.jsx)(A.a,{children:Object(I.jsx)("div",{className:"App",children:Object(I.jsxs)(T.d,{children:[Object(I.jsx)(T.b,{exact:!0,path:"/login",render:function(){return Object(I.jsx)(P,{})}}),Object(I.jsx)(T.b,{exact:!0,path:"/Profile",render:function(){return Object(I.jsx)(C,{})}}),Object(I.jsx)(T.a,{from:"/",to:"/login"}),Object(I.jsx)(T.b,{path:"/404",render:function(){return Object(I.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(I.jsx)(T.a,{from:"*",to:"/404"})]})})})},F=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,49)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},E=r(10),G=r(21),z=Object(E.b)({auth:x}),Z=Object(p.a)({reducer:z,middleware:function(e){return e().prepend(G.a)}});i.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(u.a,{store:Z,children:Object(I.jsx)(W,{})})}),document.getElementById("root")),F()}},[[48,1,2]]]);
//# sourceMappingURL=main.e089f482.chunk.js.map